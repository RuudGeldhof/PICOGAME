pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
playerx = 64
playery = 28
velx = 0
vely = 0
grounded = false
gravity = 0.5

function _update()
  if (btn(0) and playerx > 0) playerx -= 1
  if (btn(1) and playerx < 127) playerx += 1
  if (btn(2) and grounded) vely -= 4
  if (btn(3) and playery < 127) playery += 1
 
dovelocity()
dogravity() 
end

function _draw()
	cls()
	spr(1,playerx,playery)
	print(grounded)
	print(vely)
	map(0,0,0,0,16,16)
end

function dovelocity()
	boundy = 0
	if vely > 0 then boundy = 8 end
	for i = 0,vely do
		if checkpixelforcollision(playerx,playery+boundy+i) then
			vely = i
			break
		end
	end
	playery += vely
end

function checkpixelforcollision(x,y)
	cell = mget (flr(x / 8),flr(y / 8))
	if fget(cell,0) then
		return true
	else
		return false
	end
end

function dogravity()
	if checkpixelforcollision(playerx,playery+9) then
		grounded = true
	else
		grounded = false
	end
	if not grounded then
		vely += gravity
	end
end
__gfx__
0000000000fffff08888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000ffffff08555555800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000ffffff08288885800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000077222708288885800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000007777708288885800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700007777008288865800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000009090008222222800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000009090008888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000303000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000303030003030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000303030000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020200000000000000020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000200000200020002020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000002020202020000020000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020202020200020000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000202020202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
